<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìˆ«ìì•¼êµ¬</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div>ìˆ«ìì•¼êµ¬</div>
    <div>ì»´í“¨í„°ê°€ ìˆ«ìë¥¼ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤. ë‹µì„ ë§ì¶°ë³´ì„¸ìš”ğŸ˜€</div>
    <div id="tries"></div><div id="value"></div>
    <form id="form">
        <input type="text" id="input" placeholder="Guess the number"/>
        <button id="play-button">Go!</button>
    </form>
    <div id="logs"></div>

    <script>
        const $input = document.querySelector('#input');    // ì‚¬ìš©ì ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸°
        const $form = document.querySelector('#form');      // formíƒœê·¸ ê°€ì ¸ì˜¤ê¸°
        const $logs = document.querySelector('#logs');      // ê²°ê³¼ê°’ div íƒœê·¸ ê°€ì ¸ì˜¤ê¸°

        // 0~9ê¹Œì§€ì˜ ìˆ«ìë¥¼ ë°°ì—´ì— ë‹´ê¸°
        const numbers = []; // [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
        for(let n=0; n<10; n+=1) {
            numbers.push(n);
            console.log("numbers ? ", numbers)
        }
        // ë°°ì—´ì— ë‹´ê¸´ 0~9 ìˆ«ìë¥¼ ë¬´ì‘ìœ„ë¡œ ë½‘ê¸°
        const answer = [];
        for(let n=0; n<3; n+=1) {   // ì„¸ ë²ˆ ë°˜ë³µ
            const index = Math.floor(Math.random() * numbers.length);    // 0~9 ì •ìˆ˜
            answer.push(numbers[index]);    // ë½‘ì€ ìˆ«ìëŠ” ìƒˆë¡œìš´ ë°°ì—´ì— ë‹´ê¸°
            numbers.splice(index, 1);       // ìƒˆë¡œìš´ ë°°ì—´ì— ë‹´ì€ ìˆ«ìëŠ” ì›ë˜ ë°°ì—´ì—ì„œ ë¹¼ì£¼ê¸°
        }
        console.log("answer : ", answer)

        const tries = [];
        // ì‚¬ìš©ìê°€ ìˆ«ì ì…ë ¥ ì‹œ ì¡°ê±´ì— ë§ê²Œ ì…ë ¥í–ˆëŠ”ì§€ ê²€ì‚¬í•˜ëŠ” í•¨ìˆ˜. ì§€ê¸ˆì€ ê°„ë‹¨í•˜ê²Œ alertë¥¼ ì‚¬ìš©í–ˆì§€ë§Œ ìš”ì¦˜ì€ alertë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì¶”ì„¸.
        function checkInput(input) {
            if(input.length !==3) {                           // ê¸¸ì´ëŠ” 3ì´ ë§ëŠ”ê°€?
                return alert('3ìë¦¬ ìˆ«ìë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”');
            }
            if(new Set(input).size !==3) {
                return alert('ì¤‘ë³µë˜ì§€ ì•Šê²Œ ì…ë ¥í•´ ì£¼ì„¸ìš”');    // ì¤‘ë³µëœ ìˆ«ìê°€ ìˆëŠ”ê°€?
            }
            if(tries.includes(input)) {
                return alert('ì´ë¯¸ ì‹œë„í•œ ê°’ì…ë‹ˆë‹¤');           // ì´ë¯¸ ì‹œë„í•œ ê°’ì¸ê°€?
            }
            return true;
        }

        // ì‚¬ìš©ìê°€ ìˆ«ìë¥¼ ì…ë ¥í–ˆì„ ë•Œ
        $form.addEventListener('submit', (event) => {
            console.log("submit : ", 'submit')
            console.log("event : ", event)

            event.preventDefault();     // ê¸°ë³¸ ë™ì‘(submitì˜ ìƒˆë¡œê³ ì¹¨) ë§‰ê¸°
            const value = $input.value; // $input.value ëŒ€ì‹ ì— event targetì˜ 0ë²ˆì§¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
            $input.value = '';          // ì‚¬ìš©ê°€ ìˆ«ìë¥¼ ì…ë ¥ í›„ ë³€ìˆ˜ì— ì €ì¥í•˜ë©´ ë‹¤ìŒê°’ì„ ì‰½ê²Œ ì…ë ¥í•˜ê¸° ìœ„í•´ ê¸€ìë¥¼ ì§€ì›Œì¤€ë‹¤. ì´ëŸ° ë””í…Œì¼ì´ ì„¼ìŠ¤ìˆëŠ” ê°œë°œì!
            
            if(!checkInput(value)) {    // ì‚¬ìš©ìê°€ ì…ë ¥í•œ ìˆ«ìê°€ ë¬¸ì œ ìˆìœ¼ë©´ ë°”ë¡œ ë¦¬í„´.
                return;
            }
            // ì…ë ¥ê°’ ë¬¸ì œ ì—†ìŒ
            // ì‚¬ìš©ìì˜ ì…ë ¥ê°’ì´ ëœë¤ìˆ«ìì™€ ì¼ì¹˜í•œë‹¤ë©´ ê²Œì„ ì¢…ë£Œ
            if(answer.join('') === value) {     // join() : ë°°ì—´ì„ ë¬¸ìì—´ë¡œ ë°”ê¾¸ëŠ” ë©”ì†Œë“œ. ('')ë¥¼ ì•ˆì“°ë©´ ë”°ì˜´í‘œê°€ ë¶™ëŠ”ë‹¤(ê¸°ë³¸ê°’ ',') ex)1,2,3
                tries.push(value);
                $logs.textContent = `${tries.length}ë²ˆë§Œì— ë§íˆì…¨ìŠµë‹ˆë‹¤. ê²Œì„ì„ ì¢…ë£Œí•©ë‹ˆë‹¤.`;
                console.log("ê²Œì„ ì¢…ë£Œ! ", tries)
                return;
            } 
            else {
                // ì—ëŸ¬ ìˆìŒ
            }
            tries.push(value)
            
            // ìŠ¤íŠ¸ë¼ì´í¬, ë³¼ ê°¯ìˆ˜ê°€ ëª‡ê°œì¸ì§€ ì•Œì•„ë³´ê¸°.
            let strike = 0;
            let ball = 0;
            
            for(let i=0; i<answer.length; i++) {
                const index = value.indexOf(answer[i]);
                if(index > -1) {            // ëœë¤ìˆ«ìì™€ ì‚¬ìš©ìì˜ ì…ë ¥ê°’ì´ ì¸ë±ìŠ¤ë²ˆí˜¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë§ëŠ” ê²ƒì´ ìˆë‹¤ë©´ -1ë³´ë‹¤ í° ìˆ«ìê°€ ë‚˜ì˜¬ ê²ƒì´ë‹¤. ì¸ë±ìŠ¤ ë²ˆí˜¸ëŠ” -1ë³´ë‹¤ í¬ê¸° ë•Œë¬¸ì—. 
                    if(index === i) {       // ëœë¤ìˆ«ìì™€ ì‚¬ìš©ìì˜ ì…ë ¥ê°’ì´ ë§ê³ , ê·¸ ìˆ«ìì™€ ì¸ë±ìŠ¤ë²ˆí˜¸ê¹Œì§€ ì¼ì¹˜í•œë‹¤ë©´?
                        strike += 1;        // strike! 
                    } else {                
                        ball += 1;          // ëœë¤ìˆ«ìì™€ ì‚¬ìš©ìì˜ ì…ë ¥ê°’ì´ ë§ì§€ë§Œ, ìë¦¿ìˆ˜ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´? ball
                    }
                }
            }  
            console.log("value : ", value)
            console.log("strike : ", strike)
            console.log("ball : ", ball)
            logs.append(`${value} : ${strike}S${ball}B`, document.createElement('br'));
            document.querySelector('#tries').textContent = `${tries.length}ë²ˆì§¸ ì‹œë„: ${value}`;
        });

    </script>
</body>
</html>